---
- name: Listenfor Events for Web Application
  hosts: Web
  
  sources:
    - ansible.eda.urlcheck
        urls:
          - http://107.23.128.189
        delay: 10

  rules:
    - name: Application is up
      condition: event.url_check.status == "up"
      action:
      run_job_template:
        name:  system_up.yml
        organization: Default

    - name: Application is Down
      condition: event.url_check.status == "down"
      action:
        run_job_template:
          name: fix_web.yml
          organization: Default 

